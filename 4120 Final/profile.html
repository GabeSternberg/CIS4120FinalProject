<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Profile</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Italiana&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
  <style>
    /* Additional styling for the edit icon */
    .edit-icon {
      width: 20px;
      height: 20px;
      cursor: pointer;
      vertical-align: middle;
      margin-left: 8px;
    }
    /* Optional override for profile-pic size */
    .profile-pic {
      width: 225px;
      height: 225px;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ===== Header ===== -->
    <div class="profile-header">
      <h1>Your Profile</h1>
    </div>

    <!-- ===== Profile Info with Rectangular Outline ===== -->
    <div class="rectangular-box">
      <div class="inner-box">
        <div class="profile-info">
          <div class="profile-info-container">
            <div class="profile-details">
              <!-- Notice the ID attributes for editing -->
              <h2 class="name">
                <span id="editableName">Gabe Sternberg</span>
                <img src="edit.png" alt="Edit" id="editBtn" class="edit-icon">
              </h2>
              <p id="editableCollege">College: UPenn</p>
              <p id="editableMajor">Major(s): Computer Science</p>
              <p id="editableYear">Year: 2027</p>
              <p id="editableDorm">Dorm: The Radian</p>
            </div>
            <div class="profile-pic-wrapper">
              <img src="gabe.png" alt="Gabe's Profile Picture" class="profile-pic">
              <button id="updatePicBtn" class="update-pic-btn">Update Profile Picture</button>
            </div>                    
          </div>
        </div>
      </div>
    </div>

    <!-- ===== Top Sections (Interests, Artists, Schedule) Individually Outlined, Side by Side ===== -->
    <div class="top-sections">
      <!-- Top Interests -->
      <div class="rectangular-box">
        <div class="inner-box">
          <div class="top-section-box">
            <h3>Top Interests</h3>
            <ul id="topInterestsList" class="circle-list">
              <!-- Default items; will be overwritten if saved data exist -->
              <li><span>Volleyball</span></li>
              <li><span>VALORANT</span></li>
              <li><span>Anime</span></li>
              <li><span>Poker</span></li>
              <li><span>Coding</span></li>
            </ul>
            <a href="interests.html" class="see-all">See All</a>
          </div>
        </div>
      </div>

      <!-- Top Artists -->
      <div class="rectangular-box">
        <div class="inner-box">
          <div class="top-section-box">
            <h3>Top Artists</h3>
            <ul id="topArtistsList" class="circle-list">
              <li><span>Taylor Swift</span></li>
              <li><span>beabadoobee</span></li>
              <li><span>Kendrick Lamar</span></li>
              <li><span>The Marias</span></li>
              <li><span>NIKI</span></li>
            </ul>
            <a href="artists.html" class="see-all">See All</a>
          </div>
        </div>
      </div>

      <!-- Schedule -->
      <div class="rectangular-box">
        <div class="inner-box">
          <div class="top-section-box">
            <h3>Schedule</h3>
            <ul id="topScheduleList" class="circle-list">
              <li><span>CIS 2620</span></li>
              <li><span>CIS 4120</span></li>
              <li><span>PHYS 0151</span></li>
              <li><span>MEAM 1010</span></li>
              <li><span>STAT 4310</span></li>
            </ul>
            <a href="schedule.html" class="see-all">See All</a>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== Opt-In Section with Rectangular Outline ===== -->
    <div class="rectangular-box">
      <div class="inner-box">
        <div class="opt-in-section">
          <p id="optInText">New matches 4/19 7PM EST - You have not opted in yet</p>
          <button id="optInBtn">Opt In</button>
        </div>
      </div>
    </div>

    <!-- ===== Most Recent Matches (Already Outlined) ===== -->
    <div class="matches-section">
      <div class="rectangular-box">
        <div class="inner-box">
          <h3>Most Recent Matches</h3>
          <!-- Match Card 1 -->
          <div class="match-card">
            <img src="michael.png" alt="Michael's Profile" class="match-pic">
            <div class="match-info">
              <p class="match-name">Name: Michael</p>
              <p class="match-major">Major: Marketing</p>
              <p class="match-year">Year: 2025</p>
              <p class="match-dorm">Dorm: The Quad</p>
            </div>
          </div>
          <!-- Match Card 2 -->
          <div class="match-card">
            <img src="jesse.png" alt="Jesse's Profile" class="match-pic">
            <div class="match-info">
              <p class="match-name">Name: Jesse</p>
              <p class="match-major">Major: Chemistry</p>
              <p class="match-year">Year: 2026</p>
              <p class="match-dorm">Dorm: Stouffer</p>
            </div>
          </div>
          <!-- Match Card 3 -->
          <div class="match-card">
            <img src="mark.png" alt="Mark's Profile" class="match-pic">
            <div class="match-info">
              <p class="match-name">Name: Mark</p>
              <p class="match-major">Major: Astrophysics</p>
              <p class="match-year">Year: 2024</p>
              <p class="match-dorm">Dorm: Off Campus</p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- ===== Bottom Navigation Bar ===== -->
  <div class="bottom-nav">
    <a href="profile.html" class="nav-button">
      <img src="profile.png" alt="Profile" class="nav-icon">
    </a>
    <a href="chat.html" class="nav-button">
      <img src="chat.png" alt="Chat" class="nav-icon">
    </a>
    <a href="communities.html" class="nav-button">
      <img src="community.png" alt="Community" class="nav-icon">
    </a>
  </div>

  <!-- ===== Scripts for Editing Mode, Update Profile Pic, and Local Storage Loading ===== -->
  <script>
    // Toggle Opt In/Opt Out (unchanged)
    let optedIn = false;
    const prefix = "New matches 4/19 7PM EST - ";
    const optInText = document.getElementById("optInText");
    const optInBtn = document.getElementById("optInBtn");

    optInText.textContent = prefix + "You have not opted in yet";
    optInBtn.textContent = "Opt In";

    optInBtn.addEventListener("click", () => {
      optedIn = !optedIn;
      if (optedIn) {
        optInText.textContent = prefix + "You have opted in";
        optInBtn.textContent = "Opt Out";
      } else {
        optInText.textContent = prefix + "You have not opted in yet";
        optInBtn.textContent = "Opt In";
      }
    });

    // Toggle editing mode for profile details
    const editBtn = document.getElementById("editBtn");
    const editableElements = [
      document.getElementById("editableName"),
      document.getElementById("editableCollege"),
      document.getElementById("editableMajor"),
      document.getElementById("editableYear"),
      document.getElementById("editableDorm")
    ];

    let isEditing = false;

    editBtn.addEventListener("click", () => {
      isEditing = !isEditing;
      editableElements.forEach(elem => {
        elem.contentEditable = isEditing ? "true" : "false";
        elem.style.border = isEditing ? "1px dashed #ccc" : "none";
      });
    });

    // Update profile picture to "updated.png" on click
    document.getElementById("updatePicBtn").addEventListener("click", function(){
        document.querySelector(".profile-pic").src = "updated.png";
    });

    // Load persistent data (if available) from localStorage
    document.addEventListener('DOMContentLoaded', function() {
      const interestsData = JSON.parse(localStorage.getItem('interests'));
      const artistsData = JSON.parse(localStorage.getItem('artists'));
      const scheduleData = JSON.parse(localStorage.getItem('schedule'));

      if(interestsData && interestsData.length > 0){
        const list = document.getElementById("topInterestsList");
        list.innerHTML = "";
        interestsData.forEach(item => {
          const li = document.createElement("li");
          li.innerHTML = "<span>" + item + "</span>";
          list.appendChild(li);
        });
      }

      if(artistsData && artistsData.length > 0){
        const list = document.getElementById("topArtistsList");
        list.innerHTML = "";
        artistsData.forEach(item => {
          const li = document.createElement("li");
          li.innerHTML = "<span>" + item + "</span>";
          list.appendChild(li);
        });
      }

      if(scheduleData && scheduleData.length > 0){
        const list = document.getElementById("topScheduleList");
        list.innerHTML = "";
        scheduleData.forEach(item => {
          const li = document.createElement("li");
          li.innerHTML = "<span>" + item + "</span>";
          list.appendChild(li);
        });
      }
    });
  </script>
</body>
</html>
